<html>
<body>
<!-- 
<form action="poc2" method="get">
<Br/>BookId<input type="text" name="BookId"/>
<input type="submit" value="get" id="get"/>
</form>


<form action="poc1" method="post">
<Br/>Book Name<input type="text" name="BookName"/>
<input type="submit" value="post"/>
</form>

<form action="poc1" method="post">
	<Br/>Price<input type="text" name="Price"/>
	<input type="submit" value="post"/>
	</form>

<button id="b2"> Update Book</button> -->

<input type="member" id="bookid" name="bookid" placeholder="Book Id">
<span id="msg"></span><br><br>
<input type="text" id="bookname" name="bookname" placeholder="Book name"><br><br>
<input type="number" id="price" name="price" placeholder="Book Price"><br><br>
<input type="button" value="update" id="update" name="update">
</body>

<script src="jquery-3.5.1.min.js"></script>
<script>//our scrip will come here 



$(document).ready(function()
{
console.log("no more sins");
$
$(document).ready(function () 
	{ 
		console.log("blur event occurd");
		let input ={bookid: $('#bookid').val()}

		let parameters = {
			data:input,
			url:'http://localhost:3000/getbookdetails',
			type: 'get',
			datatype: 'json',
			success:(datafromserver)=>{
				if(datafromserver.status === true){
					console.log("Book id found");
					$('msg').text("Book id found ");
					$('#bookname').val(datafromserver.bookdetails.bookname);
					$('#price').val(datafromserver.bookdetails.price);
				}
				else{
					console.log("Book id not found");
					$('msg').txt("Book id not found");
					$('#bookname').val("");
					$('#price').val("");
				}
			},
			error: (errorfromserver)=>{
				console.log(error);
			}
		}
		$.ajax(parameters);

	});

	$('#update').click(()=> {
		console.log("click event occured");

		let input={bookid:$('#bookid').val(),price: $('#price').val()}

		let parameterstothefuction = {
			data: input,
			url: 'http://localhost:3000/updateprice',
			type:'get',
			datatype:'json',
			success:(datafromserver) =>{
				if(datafromserver==true){
					console.log("Bookprice updated");
					$('#msg').txt('Bookprice not updated');
				}
				else{
					console.log("Bokkprice not updated");
					$('#msg').text("Bookprice not updated");
					$('#bookname').val("");

				}
			},
			error:(errorfromserver)=>{
				console.log(error);

			}

		}
		
		$.ajax(parameterstothefuction);


	})
	
});


</script>


</html>